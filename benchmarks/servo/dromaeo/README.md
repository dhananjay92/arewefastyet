Dromaeo TestSuite for Servo's Benchmarking
==========================================
A modified version of [Dromaeo](https://wiki.mozilla.org/Dromaeo) suite to benchmark [Mozilla Servo](https://github.com/servo/servo). 
All the tests are kept as is, just the code around bringing up and collecting the results is modified so that it allows for the automation of tests.

### Set Up
1. Install [flask](http://flask.pocoo.org/).

    ```
    pip install Flask
    ```

### Manually Running the tests

1. Bring up the webserver.
    ```
    # Assuming we are in benchmarks/servo/dromaeo/ directory
    # Starts the server at http://127.0.0.1:5000
    python flask_server.py
    ```

2. Bring up servo. Following command runs test `dromaeo-3d-cube.html`. The results are appended to `benchmarks/servo/dromaeo/results/results.json`.
    ```
    servo http://127.0.0.1:5000/static/tests/dromaeo-3d-cube.html
    ```

### How does it work for Servo's benchmarking?
There are following major components in the test suite.

1. `htmlrunner.js`: Snippet of JavaScript that is executed on browser, just before and after the test. It records start time and end time. This is the script that sends the results to a local webserver residing on slave.

2. **Web Server**: A small web-server to serve all the test files and receive test results. We use [flask](http://flask.pocoo.org/) to bring up a small webserver.
    * Tests Server (`/static/tests/*`): Individual test files generated by [Makefile(:web)](https://github.com/jeresig/dromaeo/blob/master/Makefile#L24)
    * Results Collector (`/report_results`): A server side script (on *slave*) that receives the test results from web browser. It stores the results in a file `results/results.json`. These results are read by `submitter` and sent to the main *server*.